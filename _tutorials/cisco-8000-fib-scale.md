---
published: true
date: '2023-03-23 00:52 +0100'
title: Cisco 8000 FIB Scale
author: Frederic Cuiller
excerpt: >-
  This article will document how Silicon One Q100 and Q200 based systems can
  support current and future BGP scale for peering and core roles. Based on
  projected growth, we will check they are future proof for the next years to
  come.
tags:
  - Cisco 8000
  - FIB
  - Scale
  - Silicon One
position: hidden
---
{% include toc icon="table" title="Cisco 8000 FIB Scale" %}

## Introduction
Released 3 years ago in late 2019, Cisco 8000 routers have been widely adopted and deployed by service provider and cloud customers for core and peering roles.  

This article will document how Silicon One Q100 and Q200 based systems can support current and future BGP scale for peering and core roles. Based on projected growth, we will check they are future proof for the next years to come.  
Then, a new feature introduced to increase FIB scale on Q200 will also be demonstrated.
Telemetry data will also be used to illustrate system capabilities.

## What’s The FIB Scale

Forwarding  Information Base was defined in [RFC1812](https://datatracker.ietf.org/doc/html/rfc1812#page-146). This is what Fred Baker wrote in 1995:

>
Forwarding Information Base (FIB)
        The table containing the information necessary to forward IP
        Datagrams, in this document, is called the Forwarding
        Information Base.  At minimum, this contains the interface
        identifier and next hop information for each reachable
        destination network prefix.
>
{: .notice}

There is another old-school [RFC3222](https://datatracker.ietf.org/doc/html/rfc3222#section-5.5) defining the FIB scale aspect:

>
Forwarding Information Base Size
>
   Definition:
      Refers to the number of forwarding information base entries within
      a forwarding information base.
>
   Discussion:
      The number of entries within a forwarding information base is one
      of the key elements that may influence the forwarding performance
      of a router.  Generally, the more entries within the forwarding
      information base, the longer it could take to find the longest
      matching network prefix within the forwarding information base.
>
   Measurement units:  
      Number of routes
>
   Issues:  
>
   See Also:  
      forwarding information base (5.3)  
      forwarding information base entry (5.4)  
      forwarding information base prefix distribution (5.7)  
      maximum forwarding information base size (6.1)  
>
{: .notice}

20 years later, those points still matter when it comes to validate FIB scale on a modern router. Not only the number of prefixes is important, but it’s also key to consider prefixes distribution during validation. Ideally, a real FIB should be replayed and certification should not rely on artificial lab scenario (e.g: consecutive and well organized prefixes).  

Until now, Cisco 8000 officially supports up to 2M IPv4 and 500k IPv6 prefixes in FIB. This is a multi-dimensional number meaning both address families can be programmed to these maximum values. Introduced in March 2023, IOS-XR 7.9.1 brings FIB scale increase enhancement and raises this number to 3M IPv4 and 1M IPv6 prefixes. This new feature is covered later in this article.

**Did you know :bulb:** A large-scale [study](https://storage.googleapis.com/site-media-prod/documents/20190610_Labovitz_Internet_Traffic_2009-2019_v1.pdf) realized in 2019 amongst 30 ISP and content providers revealed 95% of traffic was generated by less than 1000 BGP prefixes!
{: .notice--primary}

## Cisco 8000 FIB Implementation

On 8000 and Cisco Silicon One, the unicast FIB is stored into two major tables:

- Longest Prefix Match (LPM) database: stores IPv4 and IPv6 routes
- Central Exact Match (CEM) database: stores IPv6 host routes (/128)

LPM and CEM are physically located amongst different Q100 and Q200 ASIC memories, which can be on-chip and off-chip (e.g TCAM, SRAM, HBM) . This is out of this article scope.

**Did you know :bulb:**: Cisco 8100 systems use Silicon One Q200L ASICs which doesn’t have HBM memory. This affects buffering capacities but also FIB scale. Please refer to this [deployment note](/blogs/8100-8200-deployment-note/) for 8100 systems positioning. 
{: .notice--primary}


## FIB Scale Testing Methodology

FIB scale could have been tested artificially injecting millions of consecutive prefixes. However, this does not match the field reality.  

Instead, for the different tests performed in this article, a real customer production profile was used. A major Service Provider FIB was extracted from their live network and has been used to illustrate current resource utilization and validate target future growth. 

Those production devices process a full BGP routing view. As of March 2023, this represents 935k IPv4 and 174k IPv6 prefixes.  

On top of Internet routes, there is also an additional high number of internal routes. 
This customer runs a large-scale ISIS IGP with 28k IPv4 ISIS routes. In details, this IGP contains 18k loopbacks (/32) and 9k P2P links (/30 and /31). This backbone is dual stack and ISIS also carries 2.5k IPv6 prefixes distributed as 1.5k loopbacks (/128) and 1k P2P links (/126). 
Additional customer’s internal routes are carried over iBGP for both address families. 

Table below summarizes prefixes origin, volume, and distribution:

| _    Prefixes   _                                              | _    Current Scale IPv4   _ | _    Current Scale IPv6   _ |
|----------------------------------------------------------------|-----------------------------|-----------------------------|
|     ISIS loopbacks                                             |     18k                     |     1.5k                    |
|     ISIS P2P & LAN                                             |     10k                     |     1k                      |
|     Total ISIS                                                 |     28k                     |     2.5k                    |
|     BGP internal,     including P2P (/30, /31, 126,   /127)    |     80.5k     40k           |     34.5k     1.6k          |
|     BGP Internet                                               |     935k                    |     174k                    |
| **    Total FIB   **                                           | **    1.1M   **             | **    214k   **             |



## Current Resources utilization 
### Q100
### Q200

## Future BGP Growth Support

## 8000 FIB Scale Increase

## FIB Telemetry

## Conclusion

These tests assessed Cisco 8000 current and future FIB scale. Resources monitoring and visualization was done using both traditional CLI and streaming telemetry techniques. The new FIB scale increase, introduced with IOS-XR 7.9.1 and supported on Silicon One Q200, was also demonstrated. This ultimately confirms 8000 routers can deal with peering and core FIB profiles.
